FROM alpine:3.20

# Instala dependÃªncias
RUN apk update &&     apk add --no-cache bash curl jq inotify-tools libstdc++ libgcc


echo "â³ Aguardando serviÃ§os..."
sleep 15

echo "ğŸš€ Iniciando processo..."

RUN apk add mc

echo "â³ Aguardando serviÃ§os..."
sleep 15

echo "ğŸš€ Iniciando processo..."

# Baixa o binÃ¡rio 'unrar' do repositÃ³rio EDM115
RUN curl -LsSf https://api.github.com/repos/EDM115/unrar-alpine/releases/latest \
    | jq -r '.assets[] | select(.name == "unrar") | .browser_download_url' \
    | xargs -I {} curl -Lsf {} -o /usr/local/bin/unrar && \
    chmod +x /usr/local/bin/unrar

COPY run.sh /run.sh
RUN chmod +x /run.sh

CMD ["/run.sh"]
